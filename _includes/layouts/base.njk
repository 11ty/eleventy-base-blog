<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }}</title>
		<meta name="description" content="{{ description or metadata.description }}">
		<meta name="generator" content="{{ metadata.generator }}">

		{#- Atom and JSON feeds included by default #}
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="{{ metadata.title }}">

		{#- Add the contents of a file to the bundle #}
		{%- css %}
		{% include "public/css/reset.css" %}
		{% include "public/css/index.css" %}
		{% endcss %}

		{# Include YouTube embed CSS only for post layouts #}
		{% if layout == "layouts/post.njk" %}
		<link rel="stylesheet" href="/css/prism.css"/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.3.2/src/lite-yt-embed.css">
		{% endif %}

		{%- js %}
		{% include "public/js/theme-toggle.js" %}
		{% include "public/js/chat-interface.js" %}
		{% endjs %}

		{#- Render the CSS bundle using Inlined CSS (for the fastest site performance in production) #}
		<style>{% getBundle "css" %}</style>
		{#- Renders the CSS bundle using a separate file, if you can't set CSP directive style-src: 'unsafe-inline' #}
		{#- <link rel="stylesheet" href="{% getBundleFileUrl "css" %}"> #}
	</head>
	<body style="--nav-item-active: {{ eleventyNavigation.order | default(1) }};">
		<div class="noise-container"></div>
		<a href="#skip" class="visually-hidden">Skip to main content</a>
		<div class="layout-wrapper">
			<header class="site-header">
				<nav>
					<h2 class="visually-hidden">Top level navigation menu</h2>
					{% include "components/nav-bubble.njk" %}
					<div class="side-nav">
						<ul class="nav-list">
							<li id="chat-toggle" class="nav-item">Welcome!</li>
							{%- for entry in collections.all | eleventyNavigation %}
								<li class="nav-item">
									<a href="{{ entry.url }}"{% if entry.url == page.url %} aria-current="page"{% endif %}>{{ entry.title }}</a>
								</li>
							{%- endfor %}
						</ul>
					</div>
				</nav>

				{# <div class="wave-divider"></div> #}
			</header>

			<main id="skip" class="container">
				{{ content | safe }}
			</main>
		</div>
		<footer></footer>

		<!-- This page `{{ page.url | htmlBaseUrl }}` was built on {% currentBuildDate %} -->
	</body>
</html>
<script defer>
	{% getBundle "js" %}
</script>

{% if layout == "layouts/post.njk" %}
<script src="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.3.3/src/lite-yt-embed.js"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/lite-vimeo-embed/+esm" defer></script>
{% endif %}